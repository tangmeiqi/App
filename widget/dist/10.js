webpackJsonp([10],{128:function(t,e){t.exports="data:image/png;base64,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"},151:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(30),s=i.n(o);e.default={name:"detail",data:function(){return{iprop:JSON.parse(localStorage.pdditem),couponBg:i(128),watermark:"专",imgLoaded:!1,marked:!1,action:"login",lianjie:null,defaultimg:i(31),swiperOption:{notNextTick:!0,direction:"horizontal",loop:!0,pagination:".swiper-pagination",paginationClickable:!0,autoplay:2e3,speed:500,autoplayDisableOnInteraction:!1},list:[],lblist:[]}},components:{},computed:{img:function(){return this.iprop.goods_image_url?this.iprop.goods_image_url:this.defaultimg},price:function(){return((this.iprop.min_group_price-this.iprop.coupon_discount)/100).toFixed(1)},rebate:function(){return(((this.iprop.min_group_price-this.iprop.coupon_discount)/100).toFixed(2)*(this.iprop.promotion_rate/1e3)*.4).toFixed(2)},swiper:function(){return this.$refs.mySwiper.swiper}},methods:{openUrl:function(t){var e=(document.getElementById("voucher"),localStorage.userInfo?JSON.parse(localStorage.userInfo).userId:"");console.log("userId",localStorage.userInfo),""===e?this.$router.push({name:"login"}):this.makeHref(e,t)},makeHref:function(t,e){var i=this;console.log("this.iprop.goods_id",this.iprop.goods_id);var o="pdd.ddk.goods.promotion.url.generate",a="8d2b454cedbb47ec8010a1f4cf55be3c",r="8c92300bba7e0cfdbe8c8c24879f10d150a486b9",n="8312071_73034914",d="["+this.iprop.goods_id+"]";if("sharefriend"==e)var l=t+"-share";else if("sharequan"==e)var l=t+"-share";else if("buy"==e)var l=t+"-mine";var c=r+"client_id"+a+"custom_parameters"+l+"data_typeJSONgenerate_short_url"+!1+"goods_id_list"+d+"multi_group"+!1+"p_id"+n+"timestamp1530172082186type"+o+r,p=s()(c).toUpperCase(),g="type="+o+"&data_type=JSON&timestamp=1530172082186&client_id="+a+"&p_id="+n+"&goods_id_list="+d+"&generate_short_url="+!1+"&multi_group="+!1+"&sign="+p+"&custom_parameters="+l;console.log("data",g),fetch("http://gw-api.pinduoduo.com/api/router",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded",Accept:"application/json"},body:g}).then(function(t){if(t.ok)return t.json()}).then(function(t){i.lianjie=t.goods_promotion_url_generate_response.goods_promotion_url_list[0].mobile_url,console.log("自定义推广链接",e,i.lianjie),"sharefriend"==e?wx.shareWebpage({apiKey:"wxb531b503239f2ee0",scene:"session",title:i.iprop.goods_name,contentUrl:i.lianjie},function(t,e){t.status?alert("分享成功"):alert(e.code)}):"sharequan"==e?wx.shareWebpage({apiKey:"wxb531b503239f2ee0",scene:"timeline",title:i.iprop.goods_name,contentUrl:i.lianjie},function(t,e){t.status?alert("分享成功"):alert(e.code)}):"buy"==e&&api.openWin({name:"pdd",url:i.lianjie})})},mark:function(){var t=this;if(this.marked=!this.marked,this.marked){void 0!==localStorage.pddmark&&""!==localStorage.pddmark||(localStorage.pddmark="[]");var e=JSON.parse(localStorage.pddmark);e.unshift(this.iprop),localStorage.pddmark=JSON.stringify(e),this.$root.eventHub.$emit("showNotification","已收藏(๑•ㅂ•́)و✧")}else new Promise(function(e,i){for(var o=JSON.parse(localStorage.pddmark),s=0;s<o.length;s++)if(o[s].goods_id===t.iprop.goods_id){o.splice(s,1),localStorage.pddmark=JSON.stringify(o),e(localStorage.pddmark);break}}).then(function(t){})},go:function(){void 0!==window.co&&(window.co.plugins.clipboard.copy("复制这条信息，打开「手机淘宝」领券下单 ￥mkpa02TWO8q￥"),location.href="taobao://",setTimeout(function(){alert("超时")},250),setTimeout(function(){location.reload()},1e3))},goback:function(){this.lblist=["./assets/defaultimg.jpg"],history.go(-1)},fetchdata:function(){void 0!==document.getElementsByClassName("dt-body")[0]&&(document.getElementsByClassName("dt-body")[0].scrollTop=0,this.lblist=["./assets/defaultimg.jpg"],this.iprop=JSON.parse(localStorage.pdditem),console.log("pddDetail",this.iprop),this.getGoodsDetail(),this.addBrowseHistory())},getGoodsDetail:function(){var t=this,e="pdd.ddk.goods.detail",i=Math.round((new Date).getTime()/1e3),o="8d2b454cedbb47ec8010a1f4cf55be3c",a="8c92300bba7e0cfdbe8c8c24879f10d150a486b9",r="["+this.iprop.goods_id+"]",n=a+"client_id"+o+"data_typeJSONgoods_id_list"+r+"timestamp"+i+"type"+e+a,d=s()(n).toUpperCase(),l="type="+e+"&data_type=JSON&timestamp="+i+"&client_id="+o+"&goods_id_list="+r+"&sign="+d;fetch("http://gw-api.pinduoduo.com/api/router",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded",Accept:"application/json"},body:l}).then(function(t){if(t.ok)return t.json()}).then(function(e){console.log("获取拼多多商品详细信息json:",e),t.list=e.goods_detail_response.goods_details[0],t.lblist=e.goods_detail_response.goods_details[0].goods_gallery_urls,console.log("this.list"+t.list)}).catch(function(t){console.log(t)})},addBrowseHistory:function(){if(null!==this.iprop&&this.iprop!==[null]){var t=[],e=localStorage.pddbrowseHistory;void 0!==e&&""!==e&&(t=JSON.parse(e));for(var i=0;i<t.length;i++){if(t[i].goods_id===this.iprop.goods_id){t.unshift(t.splice(i,1)[0]);break}}i===t.length&&t.unshift(this.iprop),localStorage.pddbrowseHistory=JSON.stringify(t)}},initMark:function(){if(console.log(localStorage.pddmark),void 0!==localStorage.pddmark&&""!==localStorage)for(var t=JSON.parse(localStorage.pddmark),e=0;e<t.length;e++)t[e].goods_id===this.iprop.goods_id&&(this.marked=!0)},assignData:function(t){this.iprop||(this.iprop=t)}},watch:{$route:"fetchdata"},created:function(){},updated:function(){},mounted:function(){console.log("拼多多mounted里面的localStorage",localStorage),this.swiper.width="375px",api.addEventListener({name:"keyback"},function(t,e){alert("按了返回键"),api.historyBack({frameName:""},function(t,e){t.status||api.closeWin()})})},beforeRouteEnter:function(t,e,i){i(function(t){t.initMark(),t.fetchdata()})},beforeRouteLeave:function(t,e,i){this.marked=!1,i()}}},184:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail"},[i("div",{staticClass:"dt-head"},[i("div",{staticClass:"dt-h-back",on:{click:t.goback}}),t._v(" "),i("span",{staticClass:"dt-h-title"},[t._v("优惠商品")]),t._v(" "),i("div",{staticClass:"dt-h-mark",class:{markFull:t.marked},on:{click:t.mark}})]),t._v(" "),i("div",{staticClass:"dt-body"},[i("div",{staticClass:"dt-item"},[i("div",{staticClass:"dt-i-img"},[i("swiper",{ref:"mySwiper",staticClass:"slider-box",staticStyle:{width:"100%"},attrs:{options:t.swiperOption}},[t._l(t.lblist,function(t,e){return i("swiper-slide",{key:e,staticClass:"slider-item",staticStyle:{width:"100%"}},[i("div",{staticClass:"slider-item",style:{backgroundImage:"url("+t+")",width:"100%"}})])}),t._v(" "),i("div",{staticClass:"slider-pagination swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1),t._v(" "),i("div",{staticClass:"dt-i-name"},[t._v(t._s(t.iprop.goods_name))]),t._v(" "),i("div",{staticClass:"dt-i-msg1"},[i("span",{staticClass:"dt-i-text"},[t._v(t._s(t.iprop.sold_quantity)),i("span",{staticClass:"dt-i-text3"},[t._v("人已买")])])]),t._v(" "),i("div",{staticClass:"dt-i-msg2"},[i("span",{staticClass:"msg2-text"},[t._v("￥"+t._s(t.price)+" "),i("span",{staticClass:"msg2-account",staticStyle:{"text-decoration":"line-through"}},[t._v("￥"+t._s((t.iprop.min_group_price/100).toFixed(1))+" ")])]),t._v(" "),i("span",{staticClass:"msg2-text1"},[i("span",{staticClass:"msg2-rebate"},[t._v("预估赚￥"+t._s(t.rebate))])])]),t._v(" "),i("div",{staticClass:"dt-i-msg3"},[i("div",{staticClass:"msg3-text"},[i("span",{staticClass:"msg3-text1"},[t._v(t._s((t.iprop.coupon_discount/100).toFixed(1))+"元优惠券")]),t._v(" "),i("span",{staticClass:"msg3-text2",on:{click:function(e){t.openUrl("buy")}}},[t._v("立即领券")])])]),t._v(" "),i("div",{staticClass:"dt-i-msg4"},[i("div",{staticClass:"msg4"},[t._v("描述评分"+t._s((t.list.avg_desc/100).toFixed(2)))]),t._v(" "),i("div",{staticClass:"msg4"},[t._v("物流评分"+t._s((t.list.avg_lgst/100).toFixed(2)))]),t._v(" "),i("div",{staticClass:"msg4"},[t._v("服务评分"+t._s((t.list.avg_serv/100).toFixed(2)))])]),t._v(" "),i("div",{staticClass:"dt-i-msg5"},[i("div",{staticClass:"msg5-text"},[t._v("商品详情")]),t._v(" "),t._l(t.lblist,function(t,e){return i("div",{key:e,staticClass:"msg5"},[i("div",{staticClass:"msg5-item",style:{backgroundImage:"url("+t+")",width:"100%"}})])})],2)])]),t._v(" "),i("div",{staticClass:"dt-lingquan"},[i("div",{staticClass:"dt-lingquan-share"},[i("div",{staticClass:"share3"},[t._v("分享")]),t._v(" "),i("div",{staticClass:"share1",on:{click:function(e){t.openUrl("sharefriend")}}}),t._v(" "),i("div",{staticClass:"share2",on:{click:function(e){t.openUrl("sharequan")}}})]),t._v(" "),i("div",{staticClass:"dt-lingquan-text",attrs:{id:"voucher"},on:{click:function(e){t.openUrl("buy")}}},[t._v("购买立赚"+t._s(t.rebate)+"元")])])])},staticRenderFns:[]}},88:function(t,e,i){i(!function(){var t=new Error('Cannot find module "!!../../../node_modules/extract-text-webpack-plugin/loader.js?{"omit":1,"remove":true}!vue-style-loader!css-loader?{"minimize":true,"sourceMap":true}!../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-31436a0b&scoped=true!sass-loader?{"sourceMap":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./PddDetail.vue"');throw t.code="MODULE_NOT_FOUND",t}());var o=i(6)(i(151),i(184),"data-v-31436a0b",null);t.exports=o.exports}});