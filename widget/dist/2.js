webpackJsonp([2],{126:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"shop",props:["ownprop"],components:{},data:function(){return{}},methods:{linktoItem:function(){this.$root.eventHub.$emit("pushToDetail"),localStorage.tbitem=JSON.stringify(this.ownprop)}}}},131:function(t,e,s){s(!function(){var t=new Error('Cannot find module "!!../../../node_modules/extract-text-webpack-plugin/loader.js?{"omit":1,"remove":true}!vue-style-loader!css-loader?{"minimize":true,"sourceMap":true}!../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-7c9c7e88&scoped=true!sass-loader?{"sourceMap":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Shop.vue"');throw t.code="MODULE_NOT_FOUND",t}());var a=s(6)(s(126),s(133),"data-v-7c9c7e88",null);t.exports=a.exports},133:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shop"},[s("div",{staticClass:"shop-box",on:{click:t.linktoItem}},[s("img",{staticClass:"shop-avt",attrs:{src:t.ownprop._source.picUrl}}),t._v(" "),s("div",{staticClass:"shop-info"},[s("div",{staticClass:"shop-name"},[t._v(t._s(t.ownprop._source.title))]),t._v(" "),s("div",{staticClass:"shop-assess"},[s("div",{staticClass:"shop-assess-row row1"},[s("span",{staticClass:"price"},[t._v("￥"+t._s(t.ownprop._source.zkFinalPrice)),s("span",{staticClass:"pricetext"},[t._v(" 折后价")])])]),t._v(" "),s("div",{staticClass:"shop-assess-row row2"},[s("span",{staticClass:"sale"},[t._v("销量 ")]),s("span",{staticClass:"sale"},[t._v(t._s(t.ownprop._source.volume))])])])])])])},staticRenderFns:[]}},143:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(131),i=s.n(a);e.default={name:"markrecords",props:[],components:{Shop:i.a},data:function(){return{datatb:[],datapdd:[],data:[],show:0,manageMode:!1,selectSet:new Set,selectArray:[],allSelected:!1,frontStar:s(170),backStar:s(169),defaultimg:s(31)}},computed:{indicatorLeft:function(){return"calc("+(50*this.show+25)+"% - 2rem)"},selectLabel:function(){return this.allSelected?"全不选":"全选"},submitable:function(){return 0!==this.selectArray.length},manageWord:function(){return this.manageMode?"完成":"编辑"}},methods:{img:function(t){return t.picUrl?t.picUrl:this.defaultimg},back:function(){window.history.back(-1)},linktoItem:function(t){void 0!==t.avg_desc?(localStorage.pdditem=JSON.stringify(t),this.$root.eventHub.$emit("pushToPddDetail")):(localStorage.tbitem=JSON.stringify(t),this.$root.eventHub.$emit("pushToDetail"))},fetchData:function(){if(this.datatb=localStorage.tbmark?JSON.parse(localStorage.tbmark):[],this.datapdd=localStorage.pddmark?JSON.parse(localStorage.pddmark):[],this.data=this.datatb!==[]?this.datatb.concat(this.datapdd):this.datapdd,this.data!==[])for(var t=0;t<this.data.length;t++)void 0!==this.data[t].avg_desc?(console.log("pdd"),this.data[t].picUrl=this.data[t].goods_thumbnail_url,this.data[t].title=this.data[t].goods_name,this.data[t].volume=this.data[t].sold_quantity,this.data[t].zkFinalPrice=((this.data[t].min_group_price-this.data[t].coupon_discount)/100).toFixed(1)):(console.log("tb"),console.log(this.data[t]._source),console.log(this.data[t]._source.title),this.data[t].picUrl=this.data[t]._source.picUrl,this.data[t].title=this.data[t]._source.title,this.data[t].volume=this.data[t]._source.volume,this.data[t].zkFinalPrice=this.data[t]._source.zkFinalPrice);0==this.data.length?this.show=0:this.show=1,this.manageMode=!1,this.selectSet.clear(),this.selectArray=[]},manage:function(){this.manageMode=!this.manageMode},select:function(t){this.selectSet.has(t)?(this.selectSet.delete(t),this.allSelected=!1):this.selectSet.add(t),this.selectArray=Array.from(this.selectSet)},isSelected:function(t){for(var e=0;e<this.selectArray.length;e++)if(this.selectArray[e]===t)return!0},selectAll:function(){if(this.allSelected)this.selectSet.clear(),this.selectArray=Array.from(this.selectSet);else{for(var t=0;t<this.data.length;t++)this.selectSet.add(t);this.selectArray=Array.from(this.selectSet)}this.allSelected=!this.allSelected},unMark:function(){for(var t=this.data.length-1;t>=0;t--)this.selectSet.has(t)&&(this.data.splice(t,1),this.selectSet.delete(t));this.datatb=[],this.datapdd=[];for(var e=0;e<this.data.length;e++)void 0!==this.data[e].avg_desc?(console.log("tb"),console.log(this.data[e]),this.datapdd.push(this.data[e])):(console.log("pdd"),console.log(this.data[e]),this.datatb.push(this.data[e]));localStorage.pddmark=JSON.stringify(this.datapdd),localStorage.tbmark=JSON.stringify(this.datatb),this.selectArray=Array.from(this.selectSet),0==this.data.length&&(this.show=0)}},beforeRouteEnter:function(t,e,s){s(function(t){t.fetchData()})}}},169:function(t,e,s){t.exports=s.p+"assets/img/backstar.png"},170:function(t,e,s){t.exports=s.p+"assets/img/frontstar.png"},192:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"markrecords"},[s("div",{attrs:{id:"top"}},[s("div",{attrs:{id:"back"},on:{click:t.back}}),t._v(" "),s("div",{attrs:{id:"text"}},[t._v("我的收藏")]),t._v(" "),s("div",{attrs:{id:"clear"},on:{click:t.manage}},[t._v(t._s(t.manageWord))])]),t._v(" "),s("div",{class:{inManage:!t.manageMode},attrs:{id:"content"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.show,expression:"show === 1"}],attrs:{id:"goods"}},t._l(t.data,function(e,a){return s("div",{key:e.title,staticClass:"goods_records"},[s("div",{staticClass:"select"},[s("button",{class:{selected:!t.isSelected(a)},on:{click:function(e){t.select(a)}}})]),t._v(" "),s("div",{attrs:{id:"goods_item"},on:{click:function(s){t.linktoItem(e)}}},[s("div",{staticClass:"img_goods"},[s("img",{attrs:{id:"img1",src:t.img(e,a)}})]),t._v(" "),s("div",{staticClass:"goods_msg"},[s("div",{staticClass:"goods_name"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"price"},[t._v(t._s(e.zkFinalPrice)),s("span",[t._v(" 券后")])]),t._v(" "),s("div",{staticClass:"sales"},[t._v("月销："+t._s(e.volume))])])])])}))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.show,expression:"show === 0"}],staticClass:"no-record"},[t._v("啊哦，这里空空如也,"),s("br"),t._v("快去收藏吧~")]),t._v(" "),s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.manageMode,expression:"manageMode"}],staticClass:"bottom"},[s("button",{staticClass:"select-all",class:{selected:!t.allSelected},on:{click:t.selectAll}}),s("span",[t._v(t._s(t.selectLabel))]),t._v(" "),s("button",{staticClass:"select-submit",class:{submitAble:t.submitable},on:{click:t.unMark}},[t._v("取消收藏")])])])],1)},staticRenderFns:[]}},82:function(t,e,s){s(!function(){var t=new Error('Cannot find module "!!../../../node_modules/extract-text-webpack-plugin/loader.js?{"omit":1,"remove":true}!vue-style-loader!css-loader?{"minimize":true,"sourceMap":true}!../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-45e9e0df&scoped=true!sass-loader?{"sourceMap":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MarkRecords.vue"');throw t.code="MODULE_NOT_FOUND",t}());var a=s(6)(s(143),s(192),"data-v-45e9e0df",null);t.exports=a.exports}});